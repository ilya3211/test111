!function(t){"function"==typeof define&&define.amd?define("tinymce",t):t()}((function(){"use strict";var t;(t=jQuery)(document).on("click",".wpshop-blockquote",(function(){t(".wpshop-blockquote").removeClass("active"),t(this).addClass("active")})),tinymce.create("tinymce.plugins.blockquote_button_plugin",{init:function(e,o){e.addButton("blockquote_btn",{title:"Добавить блок внимания",onclick:function(){var o=e.selection.getContent({format:"html"}),n=100;0===o.length&&(n=250);var a='<div class="wpshop-blockquote-icons"><span class="wpshop-blockquote wpshop-blockquote--warning" data-type="warning"></span><span class="wpshop-blockquote wpshop-blockquote--question" data-type="question"></span><span class="wpshop-blockquote wpshop-blockquote--danger" data-type="danger"></span><span class="wpshop-blockquote wpshop-blockquote--check" data-type="check"></span><span class="wpshop-blockquote wpshop-blockquote--info" data-type="info"></span><span class="wpshop-blockquote wpshop-blockquote--thumbs-up" data-type="thumbs-up"></span><span class="wpshop-blockquote wpshop-blockquote--thumbs-down" data-type="thumbs-down"></span><span class="wpshop-blockquote wpshop-blockquote--quote" data-type="quote"></span></div>';0===o.length&&(a+='<div class="wpshop-blockquote-textarea"><textarea placeholder="Введите текст">'+o+"</textarea></div>"),e.windowManager.open({title:"Вставить блок внимания",cmd:"blockquote_btn_command",html:a,height:n,buttons:[{text:"OK",subtype:"primary",onclick:function(){var o=t(".wpshop-blockquote.active").data("type"),n=e.selection.getContent({format:"html"});0===n.length&&(n=t(".wpshop-blockquote-textarea textarea").val());var a="<blockquote class='"+o+"'>"+n+"</blockquote>";e.execCommand("mceInsertContent",0,a),tinymce.activeEditor.windowManager.close()}},{text:"Отмена",onclick:"close"}]})}}),e.addButton("spoiler_btn",{title:"Спойлер",cmd:"spoiler_btn_command",image:o+"/../images/admin/spoiler-ico.png"}),e.addButton("mark_btn",{title:"Выделить текст",image:o+"/../images/admin/tinymce-mark.png",onclick:function(){var o=e.selection.getContent({format:"html"});if(0!==o.length){var n="<mark>"+o+"</mark>";e.execCommand("mceInsertContent",0,n)}else{var a='<div class="wpshop-mark-btn-textarea"><textarea placeholder="Введите текст">'+o+"</textarea></div>";e.windowManager.open({title:"Вставить выделенный текст",cmd:"mark_btn_command",html:a,height:170,buttons:[{text:"OK",subtype:"primary",onclick:function(){var o=e.selection.getContent({format:"html"});if(0!==(o=t(".wpshop-mark-btn-textarea textarea").val()).length){var n="<mark>"+o+"</mark>";e.execCommand("mceInsertContent",0,n)}tinymce.activeEditor.windowManager.close()}},{text:"Отмена",onclick:"close"}]})}}}),e.addButton("mask_link",{title:"Замаскировать ссылку",cmd:"mask_link_command",image:o+"/../images/admin/link.png"}),e.addCommand("mask_link_command",(function(t,o){var n=e.selection.getContent({format:"raw"});if(""!==n){var a=jQuery.trim(prompt("Введите адрес ссылки"));""!==a?e.execCommand("mceInsertContent",0,'[mask_link href="'+a+'" target="_blank"]'+n+"[/mask_link]"):alert("Необходимо указать адрес ссылки")}else alert("Необходимо выделить текст ссылки")})),e.addCommand("spoiler_btn_command",(function(){var t=e.selection.getContent({format:"html"});if(0!==t.length){var o=prompt("Введите заголовок спойлера или оставьте пустым"),n=' title="'+o+'"';0===o.length&&(n=""),e.execCommand("mceReplaceContent",!1,"[spoiler"+n+"]"+t+"[/spoiler]")}else alert("Выделите текст для спойлера")}))},createControl:function(t,e){return null},getInfo:function(){return{longname:"Extra Buttons",author:"WPShop.biz",version:"1"}}}),tinymce.PluginManager.add("blockquote_button_plugin",tinymce.plugins.blockquote_button_plugin)}));